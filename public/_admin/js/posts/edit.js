(()=>{function e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var t=void 0!==window.PostsLocale&&window.PostsLocale;if(!t)throw new Error("PostsLocale locale not loaded.");window.AppTextEditor={getContent:function(e){var t=$("#plugin_text_editor");return t?t.val():""}},jQuery((function(a){"use strict";var o=window.AppLocale;ValPressTextEditor.register("post_excerpt",new Quill("#post_excerpt-editor",{modules:{toolbar:[[{header:[!1]}],["bold","italic","underline"]]},scrollingContainer:".quill-scrolling-container",placeholder:t.text_description,theme:"bubble"})),a(".js-save-post-button").on("click",(function(n){n.preventDefault();var s=a(this);return s.addClass("no-click"),a.ajax({url:o.ajax.url,method:"POST",async:!0,timeout:29e3,data:e({action:"update_post",post_id:t.post_id,post_status:a("#post_status").val(),post_title:a("#post_title").val(),post_content:AppTextEditor.getContent(null),post_excerpt:ValPressTextEditor.getHTML("post_excerpt"),post_categories:a("#post_categories").val(),post_tags:a("#post_tags").val(),sticky_featured:a("#sticky_featured").val(),comments_enabled:a("#comments_enabled").val(),__post_image_id:a("#__post_image_id").val()},o.nonce_name,o.nonce_value)}).done((function(e){e?e.success?e.data?(showToast(e.data.message,"success"),a(".view-post-button").attr("href",e.data.preview_url)):showToast(AppLocale.ajax.empty_response,"warning"):e.data?showToast(e.data,"warning"):showToast(AppLocale.ajax.empty_response,"warning"):showToast(AppLocale.ajax.no_response,"warning")})).fail((function(e,t,a){showToast(a,"error")})).always((function(){s.removeClass("no-click")})),!1}))})),jQuery((function(a){"use strict";a("#post_categories").selectize({create:function(o,n){var s={value:0,text:""};a.ajax({url:window.AppLocale.ajax.url,method:"POST",cache:!1,async:!0,timeout:2900,data:e({action:"create_category",name:o,language_id:t.language_id,post_type_id:t.post_type_id},window.AppLocale.nonce_name,window.AppLocale.nonce_value)}).done((function(e){if(e&&e.success)return s.value=e.data,s.text=o,n(s)}))}}),a("#post_tags").selectize({create:function(o,n){var s={value:0,text:""};a.ajax({url:window.AppLocale.ajax.url,method:"POST",cache:!1,async:!1,timeout:2900,data:e({action:"create_tag",name:o,language_id:t.language_id,post_type_id:t.post_type_id},window.AppLocale.nonce_name,window.AppLocale.nonce_value)}).done((function(e){if(e&&e.success)return s.value=e.data,s.text=o,n(s)}))}})}))})();