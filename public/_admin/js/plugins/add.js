/*! For license information please see add.js.LICENSE.txt */
(()=>{var e=void 0!==window.AppLocale&&window.AppLocale;if(!e)throw new Error("PluginsLocale locale not loaded.");var a=void 0!==window.PluginsLocale&&window.PluginsLocale;if(!a)throw new Error("PluginsLocale locale not loaded.");jQuery((function(o){"use strict";var n=!1,t=new DropifyImageUploader(o("#plugin_upload_field"));n||(t.setup({on_add_image:function(n){var t=n.element[0].files[0];if(t.length<1)return!1;var r=new FormData;r.append("action","upload_plugin"),r.append("the_file",t),r.append(e.nonce_name,e.nonce_value),o.ajax({url:e.ajax.url,method:"POST",async:!0,timeout:29e3,data:r,processData:!1,contentType:!1}).done((function(o){o?o.success?o.data?(n.ajaxResponse=o.data,showToast(a.text_plugin_uploaded,"success")):showToast(e.ajax.empty_response,"warning"):o.data?showToast(o.data,"warning"):showToast(e.ajax.empty_response,"warning"):showToast(e.ajax.no_response,"error")})).fail((function(e,a,o){showToast(o,"error")})).always((function(){var e=n.element.parents(".dropify-wrapper.has-preview");e&&e.length&&o(".dropify-clear",e).trigger("click")}))},on_remove_image:function(n){var t,r,s;n.element.val().trim().length>0&&o.ajax({url:e.ajax.url,method:"POST",async:!0,timeout:29e3,data:(t={action:"delete_plugin",path:n.ajaxResponse.path},r=e.nonce_name,s=e.nonce_value,r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t)}).done((function(o){o?o.success?showToast(a.text_plugin_deleted,"success"):o.data?showToast(o.data,"warning"):showToast(e.ajax.empty_response,"warning"):showToast(e.ajax.no_response,"error")})).fail((function(e,a,o){showToast(o,"error")}))}}),n=!0)}))})();