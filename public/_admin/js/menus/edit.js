(()=>{function e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var t=void 0!==window.AppLocale&&window.AppLocale;if(!t)throw new Error("AppLocale locale not loaded.");var a=void 0!==window.MenuLocale&&window.MenuLocale;if(!a)throw new Error("MenuLocale locale not loaded.");jQuery((function(n){"use strict";({__ACTION_ADD__:"x0000",__ACTION_REMOVE__:"x0001",__nestable:null,__btnSaveMenu:null,__btnEmptyMenu:null,__placeholder:null,__btnAddToMenu:null,__btnCustomAddToMenu:null,init:function(){this.__nestable=n(".dd"),this.__btnSaveMenu=n(".js-btn-save-menu"),this.__btnEmptyMenu=n(".js-btn-empty-menu"),this.__placeholder=n(".menu-empty"),this.__btnAddToMenu=n(".js-btn-add-to-menu"),this.__btnCustomAddToMenu=n(".js-custom-add-to-menu-button"),this.__initNestable(),this.updateSaveButtonState(this.__ACTION_ADD__,!1),this.__setupListeners()},__initNestable:function(){var e=this;this.__nestable.nestable({maxDepth:20,scroll:!0,callback:function(t,a){console.info(n(a).attr("data-id")),e.updateSaveButtonState(e.__ACTION_ADD__)}})},__hasMenuItems:function(){var e=this.__nestable.find(".dd-item");return e&&e.length>=1},__bindClickMenuItemRemove:function(){var e=this;n(".js-btn-remove",e.__nestable).off("click").on("click",(function(t){if(t.preventDefault(),t.stopPropagation(),confirm(a.confirm_delete_item)){var s=n(t.target).parents(".dd-item").first();s&&(s.addClass("js-deleted hidden"),e.updateSaveButtonState(e.__ACTION_REMOVE__,!0))}}))},__bindCollapsible:function(){n(".dd-collapse",this.__nestable).on("click",(function(e){e.stopPropagation(),e.preventDefault();var t=n(this).parents(".dd-item").first();t&&t.addClass("dd-collapsed")})),n(".dd-expand",this.__nestable).on("click",(function(e){e.stopPropagation(),e.preventDefault();var t=n(this).parents(".dd-item").first();t&&t.removeClass("dd-collapsed")}))},__resetChecked:function(e){var t=e.find(".js-check-input:checked");t&&t.length>=1&&n.each(t,(function(e,t){var a=n(t);a.is(":checked")&&a.prop("checked",!1)}))},__setupListeners:function(){var s=this;this.__hasMenuItems()&&(this.__bindClickMenuItemRemove(),this.__bindCollapsible()),this.__btnAddToMenu.on("click",(function(e){e.preventDefault();var t=n(this),i=n(".collapse.show "+t.attr("data-target"));if(void 0!==i){var o=i.find(".js-check-input:checked");n.each(o,(function(e,t){var i=n(t),o=i.val(),d=i.attr("data-type"),l=i.attr("data-menu-item-id"),r=i.attr("data-title"),u=d+o;s.__nestable.nestable("add",{id:o,selector:u,"menu-item-id":l,type:d,children:[]});var _=n('[data-id="'+o+'"]'),c=n(".dd-handle",_);n("> .dd-content",c).attr("title",r).html(r),n('<a href="#" class="js-btn-remove" title="'+a.delete_text_title+'">'+a.delete_text+"</a>").insertBefore(c)})),o.length>=1&&(s.updateSaveButtonState(s.__ACTION_ADD__),s.__bindClickMenuItemRemove(),s.__resetChecked(i))}})),this.__btnCustomAddToMenu.on("click",(function(e){e.preventDefault();var t=n("#menu-item-title").val(),i=n("#menu-item-url").val(),o=n("#menu-item-data-type").val(),d=s.__uniqueID(),l=o+d;if(!t||t.length<1)return!1;if(!i||i.length<1)return!1;s.__nestable.nestable("add",{id:d,selector:l,"menu-item-id":0,type:o,title:t,url:i,children:[]});var r=n('[data-id="'+d+'"]'),u=n(".dd-handle",r);n("> .dd-content",u).attr("title",t).html(t),n('<a href="#" class="js-btn-remove" title="'+a.delete_text_title+'">'+a.delete_text+"</a>").insertBefore(u),s.updateSaveButtonState(s.__ACTION_ADD__),s.__bindClickMenuItemRemove()})),this.__btnSaveMenu.on("click",(function(i){var o=n(this),d=s.__menuToArray(s),l=n("#menu-items-sortable .js-ajax-loader");o.addClass("no-click"),l.removeClass("hidden");var r={url:t.ajax.url,method:"POST",async:!0,timeout:29e3,data:e({action:"menu_save",menu_id:a.menu_id,menu_items:d},t.nonce_name,t.nonce_value)};n.ajax(r).done((function(e){e?e.success?e.data?showToast(e.data,"success"):showToast(t.ajax.empty_response,"warning"):e.data?showToast(e.data,"warning"):showToast(t.ajax.empty_response,"warning"):showToast(t.ajax.no_response,"warning")})).fail((function(e,t,a){showToast(a,"error")})).always((function(){s.updateSaveButtonState(s.__ACTION_ADD__),l.addClass("hidden")}))})),this.__btnEmptyMenu.on("click",(function(e){e.preventDefault(),confirm(a.confirm_empty_menu)&&(s.__nestable.html(""),s.updateSaveButtonState(s.__ACTION_REMOVE__,!0))}))},__menuToArray:function(e){var t=n(">.dd-list > .dd-item:not(.js-deleted)",e.__nestable),a={};return n.each(t,(function(t,s){var i=n(s),o=i.attr("data-selector"),d=i.attr("data-type");a[t]={id:i.attr("data-id"),type:d,selector:o,menuItemId:i.attr("data-menu-item-id"),children:[]},"custom"===d&&(a[t].title=i.attr("data-title"),a[t].url=i.attr("data-url")),a[t].children=e.__getChildren(e,i)})),a},__getChildren:function(e,t){var a=[],s=n(">.dd-list >.dd-item:not(.js-deleted)",t);return s.length>0&&n.each(s,(function(t,s){var i=n(s),o=i.attr("data-selector"),d=i.attr("data-type");a[t]={id:i.attr("data-id"),type:d,selector:o,menuItemId:i.attr("data-menu-item-id"),children:e.__getChildren(e,i)},"custom"===d&&(a[t].title=i.attr("data-title"),a[t].url=i.attr("data-url"))})),a},__uniqueID:function(){return"_"+Math.random().toString(36).substr(2,9)},updateSaveButtonState:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e===this.__ACTION_ADD__&&(this.__placeholder.hide(),this.__btnSaveMenu.removeClass("hidden")),this.__hasMenuItems()||(t||this.__btnSaveMenu.addClass("hidden"),this.__placeholder.show()),t?this.__btnSaveMenu.removeClass("no-click disabled"):this.__btnSaveMenu.addClass("no-click disabled")}}).init()})),jQuery((function(n){"use strict";var s=n("#form-menu-name .js-ajax-loader");n(".js-save-menu-title-button").on("click",(function(i){i.preventDefault();var o=n(this),d=n("#form-menu-name"),l=n(".name-field",d);if(!l||!l.val().length>0)return!1;o.addClass("no-click"),s.removeClass("hidden");var r={url:t.ajax.url,method:"POST",cache:!1,timeout:29e3,data:e({action:"save_menu_name",menu_name:l.val(),menu_id:a.menu_id},t.nonce_name,t.nonce_value)};n.ajax(r).done((function(e){e?e.success?showToast(e.data,"success"):e.data?showToast(e.data,"warning"):showToast(t.ajax.empty_response,"warning"):showToast(t.ajax.no_response,"error")})).fail((function(e,t,a){showToast(a,"error")})).always((function(){o.removeClass("no-click"),s.addClass("hidden")}))}))})),jQuery((function(n){"use strict";var s=n(".form-menu-options .js-ajax-loader");n(".js-menu-save-options-button").on("click",(function(i){i.preventDefault();var o=n(this),d=n('input[name="display_as"]:checked');if(!d||!d.val().length>0)return!1;o.addClass("no-click"),s.removeClass("hidden");var l={url:t.ajax.url,method:"POST",cache:!1,timeout:29e3,data:e({action:"save_menu_options",display_as:d.val(),menu_id:a.menu_id},t.nonce_name,t.nonce_value)};n.ajax(l).done((function(e){e?e.success?showToast(a.text_options_saved,"success"):e.data?showToast(e.data,"warning"):showToast(t.ajax.empty_response,"warning"):showToast(t.ajax.no_response,"error")})).fail((function(e,t,a){showToast(a,"error")})).always((function(){o.removeClass("no-click"),s.addClass("hidden")}))}))})),jQuery((function(e){"use strict";e(".cp-menu-edit-accordion");e(".js-trigger").on("click",(function(t){t.preventDefault();var a=e(this),n=a.next(".js-sign");a.hasClass("collapsed")?n.removeClass("fa-plus").addClass("fa-minus"):n.removeClass("fa-minus").addClass("fa-plus")}))}))})();