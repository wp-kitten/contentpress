(()=>{var e=void 0!==window.MediaLocale&&window.MediaLocale;if(!e)throw new Error("MediaLocale locale not loaded.");jQuery((function(a){"use strict";var o=window.AppLocale,s=!1,i=new DropifyImageUploader(a("#media_image_upload_field")),n=a(".js-image-preview-uploads"),t=a(".backdrop-preview");s||(i.setup({on_add_image:function(s){var i=s.element[0].files[0];if(i.length<1)return!1;var r=new FormData;r.append("action","media_upload_image"),r.append("media_image",i),r.append(o.nonce_name,o.nonce_value),t.addClass("visible"),a.ajax({url:o.ajax.url,method:"POST",async:!0,timeout:29e3,data:r,processData:!1,contentType:!1}).done((function(i){if(i)if(i.success)if(i.data){s.ajaxResponse=i.data,showToast(e.text_image_set,"success");var r=a("#media_image_upload_field").dropify();(r=r.data("dropify")).resetPreview(),n.append('<div class="col-md-2"><div class="thumbnail"><img src="'+i.data.url+'" data-id="'+i.data.id+'" alt=""/></div></div>').addClass("visible"),t.removeClass("visible")}else showToast(o.ajax.empty_response,"warning");else i.data?showToast(i.data,"warning"):showToast(o.ajax.empty_response,"warning");else showToast(o.ajax.no_response,"error")})).fail((function(e,a,o){showToast(o,"error"),t.removeClass("visible")}))},on_remove_image:function(s){var i,n,t;a.ajax({url:o.ajax.url,method:"POST",async:!0,timeout:29e3,data:(i={action:"media_delete_image",path:s.ajaxResponse.path},n=o.nonce_name,t=o.nonce_value,n in i?Object.defineProperty(i,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[n]=t,i)}).done((function(a){a?a.success?showToast(e.text_image_removed,"success"):showToast(o.ajax.empty_response,"warning"):showToast(o.ajax.no_response,"error")})).fail((function(e,a,o){showToast(o,"error")}))}}),s=!0)}))})();