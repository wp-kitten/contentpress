/*! For license information please see add.js.LICENSE.txt */
(()=>{var e=void 0!==window.ThemesLocale&&window.ThemesLocale;if(!e)throw new Error("ThemesLocale locale not loaded.");jQuery((function(a){"use strict";var o=window.AppLocale,n=!1,t=new DropifyImageUploader(a("#theme_upload_field"));n||(t.setup({on_add_image:function(n){var t=n.element[0].files[0];if(t.length<1)return!1;var s=new FormData;s.append("action","upload_theme"),s.append("the_file",t),s.append(o.nonce_name,o.nonce_value),a.ajax({url:o.ajax.url,method:"POST",async:!0,timeout:29e3,data:s,processData:!1,contentType:!1}).done((function(a){a?a.success?a.data?(n.ajaxResponse=a.data,showToast(e.text_theme_uploaded,"success")):showToast(o.ajax.empty_response,"warning"):a.data?showToast(a.data,"warning"):showToast(o.ajax.empty_response,"warning"):showToast(o.ajax.no_response,"error")})).fail((function(e,a,o){showToast(o,"error")})).always((function(){var e=n.element.parents(".dropify-wrapper.has-preview");e&&e.length&&a(".dropify-clear",e).trigger("click")}))},on_remove_image:function(n){var t,s,r;n.element.val().trim().length>0&&a.ajax({url:o.ajax.url,method:"POST",async:!0,timeout:29e3,data:(t={action:"delete_theme",path:n.ajaxResponse.path},s=o.nonce_name,r=o.nonce_value,s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t)}).done((function(a){a?a.success?showToast(e.text_theme_deleted,"success"):a.data?showToast(a.data,"warning"):showToast(o.ajax.empty_response,"warning"):showToast(o.ajax.no_response,"error")})).fail((function(e,a,o){showToast(o,"error")}))}}),n=!0)}))})();